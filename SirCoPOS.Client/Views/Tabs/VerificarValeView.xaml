<UserControl x:Class="SirCoPOS.Client.Views.Tabs.VerificarValeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:tk="http://schemas.xceed.com/wpf/xaml/toolkit"
             mc:Ignorable="d" xmlns:vm="clr-namespace:SirCoPOS.Client.ViewModels.Tabs"
             xmlns:cv="clr-namespace:SirCoPOS.Client.Converters"
             d:DesignHeight="450" d:DesignWidth="800">
    <UserControl.DataContext>
        <vm:VerificarValeViewModel></vm:VerificarValeViewModel>
    </UserControl.DataContext>
    <UserControl.Resources>
        <cv:ImageUrlMultiConverter x:Key="imageUrl"></cv:ImageUrlMultiConverter>
        <cv:BoolTextConverter x:Key="boolText"></cv:BoolTextConverter>
        <cv:InverseBoolConverter x:Key="inv"></cv:InverseBoolConverter>
        <BooleanToVisibilityConverter x:Key="bolvis"/>
    </UserControl.Resources>
    <tk:BusyIndicator IsBusy="{Binding IsBusy}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="7*"/>
                <RowDefinition Height="143*"/>
            </Grid.RowDefinitions>
            <Grid.Background>
                <SolidColorBrush Color="{DynamicResource {x:Static SystemColors.GradientInactiveCaptionColorKey}}"/>
            </Grid.Background>
            <TextBlock x:Name="tbk_vale" HorizontalAlignment="Left" Margin="10,11,0,0" TextWrapping="Wrap" Text="Vale" VerticalAlignment="Top" Grid.RowSpan="2"/>
            <TextBox x:Name="txt_buscar" HorizontalAlignment="Left" Height="27" Margin="109,10,0,0" TextWrapping="Wrap" Text="{Binding ValeSearch, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Width="120" KeyboardNavigation.TabIndex ="0" Grid.RowSpan="2">
                <TextBox.InputBindings>
                    <KeyBinding Key="Return" Command="{Binding FindValeCommand}"></KeyBinding>
                </TextBox.InputBindings>
            </TextBox>
            <TextBlock x:Name="tbk_ctd" HorizontalAlignment="Left" Margin="109,16.65,0,0" TextWrapping="Wrap" Text="{Binding Vale.Vale}" VerticalAlignment="Top" Grid.Row="1"/>
            <TextBlock x:Name="tbk_disponibilidad" HorizontalAlignment="Left" Margin="109,39.65,0,0" TextWrapping="Wrap" Text="{Binding Vale.Disponible, StringFormat=\{0:C\}}" VerticalAlignment="Top" Grid.Row="1"/>
            <TextBlock x:Name="textBlock_Copy" HorizontalAlignment="Left" Margin="10,16.65,0,0" TextWrapping="Wrap" Text="#" VerticalAlignment="Top" Grid.Row="1"/>
            <TextBlock x:Name="textBlock_Copy1" HorizontalAlignment="Left" Margin="10,45.65,0,0" TextWrapping="Wrap" Text="Disponible" VerticalAlignment="Top" Grid.Row="1"/>
            <TextBlock Text="{Binding Vale.CanceladoMotivo, StringFormat={}Cancelado - {0}, TargetNullValue=Cancelado}" Visibility="{Binding Vale.Cancelado, Converter={StaticResource bolvis}, FallbackValue=Hidden}" Foreground="Red" x:Name="tbk_cancel" HorizontalAlignment="Left" Margin="10,74.65,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Grid.Row="1"/>
            <TextBlock x:Name="textBlock2_Copy" HorizontalAlignment="Left" Margin="294,18.65,0,0" TextWrapping="Wrap" Text="Distribuidor" VerticalAlignment="Top" Grid.Row="1"/>
            <TextBlock x:Name="tbk_distrib" Margin="393,16.65,205,0" TextWrapping="Wrap" VerticalAlignment="Top" Grid.Row="1">
                <TextBlock.Text>
                    <MultiBinding StringFormat="{}{0} {1} {2}">
                        <Binding Path="Vale.Distribuidor.Nombre" />
                        <Binding Path="Vale.Distribuidor.ApPaterno" />
                        <Binding Path="Vale.Distribuidor.ApMaterno" />
                    </MultiBinding>
                </TextBlock.Text>
            </TextBlock>
            <TextBlock x:Name="tbk_estatus" Margin="393,47.65,0,0" TextWrapping="Wrap" Text="{Binding Vale.Distribuidor.Status}" VerticalAlignment="Top" HorizontalAlignment="Left" Grid.Row="1"/>
            <TextBlock x:Name="textBlock2_Copy3" HorizontalAlignment="Left" Margin="294,47.65,0,0" TextWrapping="Wrap" Text="Estatus" VerticalAlignment="Top" Grid.Row="1"/>
            <ItemsControl Margin="10,224.65,10,10" ItemsSource="{Binding Vale.Distribuidor.Firmas}" Grid.Row="1">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <StackPanel Orientation="Horizontal"></StackPanel>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <StackPanel>
                            <TextBlock Text="{Binding }"></TextBlock>
                            <Image>
                                <Image.Source>
                                    <MultiBinding Converter="{StaticResource ResourceKey=imageUrl}" ConverterParameter="FirmaUrl">
                                        <Binding Path="DataContext.Vale.Distribuidor.Id" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=ItemsControl}" ></Binding>
                                        <Binding></Binding>
                                    </MultiBinding>
                                </Image.Source>
                            </Image>
                            <!--<TextBlock>
                            <TextBlock.Text>
                                <MultiBinding Converter="{StaticResource ResourceKey=imageUrl}" ConverterParameter="FirmaUrl">
                                    <Binding Path="DataContext.Vale.Distribuidor.Id" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=ItemsControl}" ></Binding>
                                    <Binding></Binding>
                                </MultiBinding>
                            </TextBlock.Text>
                        </TextBlock>-->
                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
            <TextBlock x:Name="textBlock_Copy3" HorizontalAlignment="Left" Margin="294,11,0,0" TextWrapping="Wrap" Text="Cuenta" VerticalAlignment="Top" Grid.RowSpan="2"/>
            <TextBlock x:Name="textBlock_Copy4" Margin="365,14,378,0" TextWrapping="Wrap" Text="{Binding Vale.Distribuidor.Cuenta}" VerticalAlignment="Top" Grid.RowSpan="2"/>
            <TextBlock x:Name="textBlock4" HorizontalAlignment="Left" Margin="295,75.65,0,0" TextWrapping="Wrap" Text="Electrónica" VerticalAlignment="Top" Grid.Row="1"/>
            <TextBlock x:Name="tbk_electr" Margin="386,75.65,0,0" TextWrapping="Wrap" Text="{Binding Vale.Distribuidor.Electronica, Converter={StaticResource boolText}}" VerticalAlignment="Top" HorizontalAlignment="Left" Grid.Row="1"/>
            <TextBlock HorizontalAlignment="Left" Margin="294,104.65,0,0" TextWrapping="Wrap" Text="Cliente" VerticalAlignment="Top" Grid.Row="1"/>
            <TextBlock Name="tbk_cte"  HorizontalAlignment="Left" Margin="394,104.65,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Grid.Row="1">
                <TextBlock.Text>
                    <MultiBinding StringFormat="{}{0} {1} {2}">
                        <Binding Path="NuevoCliente.Nombre" />
                        <Binding Path="NuevoCliente.ApPaterno" />
                        <Binding Path="NuevoCliente.ApMaterno" />
                    </MultiBinding>
                </TextBlock.Text>
            </TextBlock>
            <Button Content="Load" HorizontalAlignment="Left" Margin="293,136.65,0,0" VerticalAlignment="Top" Width="51" Command="{Binding LoadClienteCommand, Mode=OneWay}" KeyboardNavigation.TabIndex ="4" Grid.Row="1"/>
            <Button Content="x" HorizontalAlignment="Left" Margin="355,136.65,0,0" VerticalAlignment="Top" Width="34" Command="{Binding ClearClienteCommand, Mode=OneWay}" KeyboardNavigation.TabIndex ="5" Grid.Row="1"/>
            <TextBlock HorizontalAlignment="Left" Margin="488,104.65,0,0" TextWrapping="Wrap" Text="#Cliente" VerticalAlignment="Top" Grid.Row="1"/>
            <TextBlock HorizontalAlignment="Left" Margin="366,133.65,0,0" TextWrapping="Wrap" Text="{Binding Cliente.Id}" VerticalAlignment="Top" Grid.Row="1"/>
            <TextBlock x:Name="tbk_totvale" HorizontalAlignment="Left" Margin="10,102.65,0,0" TextWrapping="Wrap" Text="Total Vale" VerticalAlignment="Top" Grid.Row="1"/>
            <TextBox IsEnabled="{Binding Vale.WithLimite, Converter={StaticResource inv}}" HorizontalAlignment="Left" Height="27" Margin="109,98.65,0,0" TextWrapping="Wrap" Text="{Binding TotalVale, StringFormat=\{0:C\}, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Width="120" KeyboardNavigation.TabIndex ="7" Grid.Row="1"/>
            <Button Content="Guardar" HorizontalAlignment="Right" Margin="0,42,38,0" VerticalAlignment="Top" Width="75" Command="{Binding RegistrarValeCommand, Mode=OneWay}" KeyboardNavigation.TabIndex ="6" Grid.Row="1"/>
            <Button Content="Solicitar" Margin="0,41,132,0" VerticalAlignment="Top" HorizontalAlignment="Right" Width="75" Command="{Binding SolicitarCreditoCommand, Mode=OneWay}" KeyboardNavigation.TabIndex ="3" Grid.Row="1"/>
            <TextBox Height="27" Margin="0,11,176,0" TextWrapping="Wrap" Text="{Binding Solicitud, StringFormat=\{0:C\}, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" HorizontalAlignment="Right" Width="94" KeyboardNavigation.TabIndex ="1" Grid.RowSpan="2"/>
            <CheckBox IsChecked="{Binding SolicitudElectronica}" Content="Electronica" Margin="0,45,232,0" VerticalAlignment="Top" KeyboardNavigation.TabIndex ="2" HorizontalAlignment="Right" Width="106" Grid.Row="1"/>
            <TextBlock Margin="0,11,273,0" TextWrapping="Wrap" Text="Solicitar" VerticalAlignment="Top" Grid.RowSpan="2" HorizontalAlignment="Right" Width="66"/>
            <!--<TextBlock Margin="0,99,4,0" TextWrapping="Wrap" Text="TextBlock" VerticalAlignment="Top" HorizontalAlignment="Right" Width="80"/>-->
            <Button Content="Credito" HorizontalAlignment="Left" Margin="109,130.65,0,0" VerticalAlignment="Top" Width="75" Command="{Binding CreditoCommand, Mode=OneWay}" KeyboardNavigation.TabIndex ="8" Grid.Row="1"/>
            <TextBlock Margin="0,11,77,0" TextWrapping="Wrap" Text="{Binding FaltanteSolicitud, Mode=OneWay, StringFormat=\{0:C\}}" VerticalAlignment="Top" HorizontalAlignment="Right" Width="94" Grid.RowSpan="2"/>
        </Grid>
    </tk:BusyIndicator>
</UserControl>
