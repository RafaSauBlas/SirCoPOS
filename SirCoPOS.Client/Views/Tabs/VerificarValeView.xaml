<UserControl x:Class="SirCoPOS.Client.Views.Tabs.VerificarValeView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:tk="http://schemas.xceed.com/wpf/xaml/toolkit"
             mc:Ignorable="d" xmlns:vm="clr-namespace:SirCoPOS.Client.ViewModels.Tabs"
             xmlns:cv="clr-namespace:SirCoPOS.Client.Converters"
             d:DesignHeight="450" d:DesignWidth="800">
    <UserControl.DataContext>
        <vm:VerificarValeViewModel></vm:VerificarValeViewModel>
    </UserControl.DataContext>
    <UserControl.Resources>
        <cv:ImageUrlMultiConverter x:Key="imageUrl"></cv:ImageUrlMultiConverter>
        <cv:BoolTextConverter x:Key="boolText"></cv:BoolTextConverter>
        <cv:InverseBoolConverter x:Key="inv"></cv:InverseBoolConverter>
        <BooleanToVisibilityConverter x:Key="bolvis"/>
    </UserControl.Resources>
    <tk:BusyIndicator IsBusy="{Binding IsBusy}">
    <Grid>
        <TextBlock x:Name="textBlock" HorizontalAlignment="Left" Margin="10,11,0,0" TextWrapping="Wrap" Text="Vale" VerticalAlignment="Top"/>
        <TextBox x:Name="searchTextBox" HorizontalAlignment="Left" Height="23" Margin="108.866,10,0,0" TextWrapping="Wrap" Text="{Binding ValeSearch, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Width="120">
            <TextBox.InputBindings>
                <KeyBinding Key="Return" Command="{Binding FindValeCommand}"></KeyBinding>
            </TextBox.InputBindings>
        </TextBox>
        <TextBlock x:Name="textBlock1" HorizontalAlignment="Left" Margin="108.866,38,0,0" TextWrapping="Wrap" Text="{Binding Vale.Vale}" VerticalAlignment="Top"/>
        <TextBlock x:Name="textBlock1_Copy" HorizontalAlignment="Left" Margin="108.866,60.576,0,0" TextWrapping="Wrap" Text="{Binding Vale.Disponible, StringFormat=\{0:C\}}" VerticalAlignment="Top"/>
        <TextBlock x:Name="textBlock_Copy" HorizontalAlignment="Left" Margin="10,38,0,0" TextWrapping="Wrap" Text="#" VerticalAlignment="Top"/>
        <TextBlock x:Name="textBlock_Copy1" HorizontalAlignment="Left" Margin="10,66.94,0,0" TextWrapping="Wrap" Text="Disponible" VerticalAlignment="Top"/>
        <TextBlock Text="{Binding Vale.CanceladoMotivo, StringFormat={}Cancelado - {0}, TargetNullValue=Cancelado}" Visibility="{Binding Vale.Cancelado, Converter={StaticResource bolvis}, FallbackValue=Hidden}" Foreground="Red" x:Name="textBlock_Copy2" HorizontalAlignment="Left" Margin="10,95.88,0,0" TextWrapping="Wrap" VerticalAlignment="Top"/>
        <TextBlock x:Name="textBlock2_Copy" HorizontalAlignment="Left" Margin="266.5,39.94,0,0" TextWrapping="Wrap" Text="Distribuidor" VerticalAlignment="Top"/>
        <TextBlock x:Name="textBlock2_Copy1" Margin="365.366,38,232.876,0" TextWrapping="Wrap" VerticalAlignment="Top" d:LayoutOverrides="Width">
            <TextBlock.Text>
                <MultiBinding StringFormat="{}{0} {1} {2}">
                    <Binding Path="Vale.Distribuidor.Nombre" />
                    <Binding Path="Vale.Distribuidor.ApPaterno" />
                    <Binding Path="Vale.Distribuidor.ApMaterno" />
                </MultiBinding>
            </TextBlock.Text>
        </TextBlock>
        <TextBlock x:Name="textBlock2_Copy2" Margin="365,69,0,0" TextWrapping="Wrap" Text="{Binding Vale.Distribuidor.Status}" VerticalAlignment="Top" HorizontalAlignment="Left"/>
        <TextBlock x:Name="textBlock2_Copy3" HorizontalAlignment="Left" Margin="266.5,68.88,0,0" TextWrapping="Wrap" Text="Estatus" VerticalAlignment="Top"/>
        <ItemsControl Margin="10,190,10,10" ItemsSource="{Binding Vale.Distribuidor.Firmas}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal"></StackPanel>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <TextBlock Text="{Binding }"></TextBlock>
                        <Image>
                            <Image.Source>
                                <MultiBinding Converter="{StaticResource ResourceKey=imageUrl}" ConverterParameter="FirmaUrl">
                                    <Binding Path="DataContext.Vale.Distribuidor.Id" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=ItemsControl}" ></Binding>
                                    <Binding></Binding>
                                </MultiBinding>
                            </Image.Source>
                        </Image>
                        <!--<TextBlock>
                            <TextBlock.Text>
                                <MultiBinding Converter="{StaticResource ResourceKey=imageUrl}" ConverterParameter="FirmaUrl">
                                    <Binding Path="DataContext.Vale.Distribuidor.Id" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=ItemsControl}" ></Binding>
                                    <Binding></Binding>
                                </MultiBinding>
                            </TextBlock.Text>
                        </TextBlock>-->
                    </StackPanel>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
        <TextBlock x:Name="textBlock_Copy3" HorizontalAlignment="Left" Margin="266.5,11,0,0" TextWrapping="Wrap" Text="Cuenta" VerticalAlignment="Top"/>
        <TextBlock x:Name="textBlock_Copy4" Margin="365.366,13.576,378.447,0" TextWrapping="Wrap" Text="{Binding Vale.Distribuidor.Cuenta}" VerticalAlignment="Top" d:LayoutOverrides="Width"/>
        <TextBlock x:Name="textBlock4" HorizontalAlignment="Left" Margin="267,97,0,0" TextWrapping="Wrap" Text="Electrónica" VerticalAlignment="Top"/>
        <TextBlock x:Name="textBlock4_Copy" Margin="358.113,97,0,0" TextWrapping="Wrap" Text="{Binding Vale.Distribuidor.Electronica, Converter={StaticResource boolText}}" VerticalAlignment="Top" HorizontalAlignment="Left"/>
        <TextBlock HorizontalAlignment="Left" Margin="266,126,0,0" TextWrapping="Wrap" Text="Cliente" VerticalAlignment="Top"/>
            <TextBlock HorizontalAlignment="Left" Margin="366,126,0,0" TextWrapping="Wrap" VerticalAlignment="Top">
                <TextBlock.Text>
                    <MultiBinding StringFormat="{}{0} {1} {2}">
                        <Binding Path="NuevoCliente.Nombre" />
                        <Binding Path="NuevoCliente.ApPaterno" />
                        <Binding Path="NuevoCliente.ApMaterno" />
                    </MultiBinding>
                </TextBlock.Text>
            </TextBlock>
            <Button Content="Load" HorizontalAlignment="Left" Margin="460,124,0,0" VerticalAlignment="Top" Width="51" Command="{Binding LoadClienteCommand, Mode=OneWay}"/>
        <Button Content="x" HorizontalAlignment="Left" Margin="516,124,0,0" VerticalAlignment="Top" Width="34" Command="{Binding ClearClienteCommand, Mode=OneWay}"/>
        <TextBlock HorizontalAlignment="Left" Margin="266,155,0,0" TextWrapping="Wrap" Text="#Cliente" VerticalAlignment="Top"/>
        <TextBlock HorizontalAlignment="Left" Margin="366,155,0,0" TextWrapping="Wrap" Text="{Binding Cliente.Id}" VerticalAlignment="Top"/>
        <TextBlock x:Name="textBlock_Copy5" HorizontalAlignment="Left" Margin="10,124,0,0" TextWrapping="Wrap" Text="Total Vale" VerticalAlignment="Top"/>
        <TextBox IsEnabled="{Binding Vale.WithLimite, Converter={StaticResource inv}}" HorizontalAlignment="Left" Height="23" Margin="109,124,0,0" TextWrapping="Wrap" Text="{Binding TotalVale, StringFormat=\{0:C\}, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Width="120"/>
        <Button Content="Guardar" HorizontalAlignment="Right" Margin="0,151,10,0" VerticalAlignment="Top" Width="75" Command="{Binding RegistrarValeCommand, Mode=OneWay}"/>
        <Button Content="Solicitar" Margin="0,66,10,0" VerticalAlignment="Top" HorizontalAlignment="Right" Width="75" Command="{Binding SolicitarCreditoCommand, Mode=OneWay}"/>
        <TextBox Height="23" Margin="0,10,107,0" TextWrapping="Wrap" Text="{Binding Solicitud, StringFormat=\{0:C\}, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" HorizontalAlignment="Right" Width="94"/>
        <CheckBox IsChecked="{Binding SolicitudElectronica}" Content="Electronica" Margin="0,38,24,0" VerticalAlignment="Top" HorizontalAlignment="Right" Width="106"/>
        <TextBlock Margin="0,10,206,0" TextWrapping="Wrap" Text="Solicitar" VerticalAlignment="Top" HorizontalAlignment="Right" Width="66"/>
        <TextBlock Margin="0,99,10,0" TextWrapping="Wrap" Text="TextBlock" VerticalAlignment="Top" HorizontalAlignment="Right" Width="74"/>
        <Button Content="Credito" HorizontalAlignment="Left" Margin="109,152,0,0" VerticalAlignment="Top" Width="75" Command="{Binding CreditoCommand, Mode=OneWay}"/>
        <TextBlock Margin="0,10,8,0" TextWrapping="Wrap" Text="{Binding FaltanteSolicitud, Mode=OneWay, StringFormat=\{0:C\}}" VerticalAlignment="Top" HorizontalAlignment="Right" Width="94"/>
    </Grid>
    </tk:BusyIndicator>
</UserControl>
